<!--
 - @file describabledetails.html
 - @brief Template for the display of a describable entity
 - @author Frédéric SCHERMA (INRA UMR1095)
 - @date 2016-12-20
 - @copyright Copyright (c) 2016 INRA/CIRAD
 - @license MIT (see LICENSE file)
 - @details 
-->

<div class="object <%= target.split('.')[1] %>" object-type="<%= target %>" object-id="-1" style="width:100%;">
    <div class="panels panel-group" style="margin-top: 10px;">
        <% var pi = 0; %>
        <% _.each(panels, function(panel) { %>
            <div class="panel panel panel-default" name="<%= panel.name %>" panel-id="<%= panel.id %>">
                <% var collapsed = pi > 0 ? "collapsed" : ""; %>
                <div class="panel-heading" data-toggle="tooltip" data-placement="left" title="<%= gt.gettext('Collapse/Expand') %>">
                    <a class="accordion-toggle <%= collapsed %>" data-toggle="collapse" href="#collapse<%= pi %>"><%= panel.label %></a>
                </div>
                <% var inout = pi == 0 ? "in" : ""; %>
                <div id="collapse<%= pi %>" class="panel-collapse collapse <%= inout %>">
                    <div class="descriptors">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th><%= gt.gettext("Descriptor") %></th>
                                    <th><%= gt.gettext("Value") %></th>
                                </tr>
                            </thead>
                            <tbody>
                                <% var i = 0; %>
                                <% _.each(panel.descriptor_model.descriptor_model_types, function(descriptor_model_type) { %>
                                    <% var format = descriptor_model_type.descriptor_type.format; %>
                                    <% var mandatory = descriptor_model_type.mandatory ? "mandatory-field" : ""; %>
                                    <tr class="descriptor" panel-index="<%= pi %>" index="<%= i %>" descriptor-model-type="<%= descriptor_model_type.id %>" code="<%= descriptor_model_type.descriptor_type.code %>">
                                        <td class="descriptor-name" style="padding-top: 5px; padding-bottom: 3px;">
                                            <%= descriptor_model_type.label %>
                                            <span class="descriptor-type-unit">
                                            <% if (descriptor_model_type.descriptor_type.format.unit === "custom") { %>
                                                <% if (descriptor_model_type.descriptor_type.format.custom_unit != undefined && descriptor_model_type.descriptor_type.format.custom_unit !== "") { %>
                                                    (<%= descriptor_model_type.descriptor_type.format.custom_unit %>)
                                                <% } %>
                                            <% } else if (descriptor_model_type.descriptor_type.format.unit != undefined) { %>
                                                (<%= application.descriptor.collections.formatUnits.findLabel(descriptor_model_type.descriptor_type.format.unit) %>)
                                            <% } %>
                                            </span>
                                        </td>
                                        <td class="descriptor-value" format-type="<%= format.type %>" style="padding-top: 3px; padding-bottom: 3px;">
                                        </td>
                                    </tr>
                                    <% ++i; %>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <% ++pi %>
        <% }) %>
    </div>
    <div class="footer" style="float: right;">
        <button type="button" class="btn btn-default modify"><%= gt.gettext("Modify") %></button>
    </div>
</div>